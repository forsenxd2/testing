<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tạo bảng chào Blanca City</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
    <style>
        body { background: #f8f9fa; }
        .container { max-width: 600px; margin-top: 40px; }
        .qr-preview { margin-top: 10px; }
    </style>
</head>
<body>
<div class="container">
    <h1 class="mb-4 text-center">Tạo bảng chào Blanca City</h1>
    <form id="chaoForm" class="step-container">
        <div class="mb-3">
            <label class="form-label">Chức vụ</label>
            <input type="text" class="form-control" id="chucVu" required>
        </div>
        <div class="mb-3">
            <label class="form-label">Tên cán bộ</label>
            <input type="text" class="form-control" id="tenCanBo" required>
        </div>
        <div class="mb-3">
            <label class="form-label">Số điện thoại (Zalo)</label>
            <input type="text" class="form-control" id="soDienThoai" required>
        </div>
        <div class="mb-3">
            <label class="form-label">Xem trước mã QR Zalo</label>
            <div id="qrPreview" class="qr-preview"></div>
        </div>
        <button type="button" class="btn btn-primary" onclick="generatePDF()">Tạo file bảng chào (PDF)</button>
    </form>
</div>
<script>
function updateQR() {
    var phone = document.getElementById('soDienThoai').value.replace(/\D/g, '');
    var qrDiv = document.getElementById('qrPreview');
    qrDiv.innerHTML = '';
    if(phone.length >= 8) {
        new QRCode(qrDiv, { text: 'https://zalo.me/' + phone, width: 120, height: 120 });
    }
}
document.getElementById('soDienThoai').addEventListener('input', updateQR);

function generatePDF() {
    var chucVu = document.getElementById('chucVu').value;
    var tenCanBo = document.getElementById('tenCanBo').value;
    var soDienThoai = document.getElementById('soDienThoai').value;
    var qrDiv = document.createElement('div');
    new QRCode(qrDiv, { text: 'https://zalo.me/' + soDienThoai, width: 180, height: 180 });
    setTimeout(function() {
        var qrImg = qrDiv.querySelector('img') || qrDiv.querySelector('canvas');
        var qrDataUrl = qrImg.tagName === 'IMG' ? qrImg.src : qrImg.toDataURL();
        var docDefinition = {
            content: [
                { text: 'BẢNG CHÀO BLANCA CITY', style: 'header', alignment: 'center', margin: [0,0,0,10] },
                {
                    table: {
                        widths: ['auto', '*'],
                        body: [
                            [
                                { text: 'Ngân hàng TMCP Ngoại thương Việt Nam – CN Thủ Thiêm\n55-56 Song Hành, P. An Phú, TP. Thủ Đức, TP. HCM', colSpan: 2, bold: true },
                                {}
                            ],
                            [
                                { text: 'Chức vụ', bold: true },
                                chucVu
                            ],
                            [
                                { text: 'Tên cán bộ', bold: true },
                                tenCanBo
                            ],
                            [
                                { text: 'Số điện thoại (Zalo)', bold: true },
                                soDienThoai
                            ],
                            [
                                { text: 'Mã QR Zalo', bold: true },
                                { image: qrDataUrl, width: 100, alignment: 'left' }
                            ]
                        ]
                    },
                    layout: 'lightHorizontalLines',
                    margin: [0,0,0,10]
                }
            ],
            styles: {
                header: { fontSize: 18, bold: true, color: '#228B22' }
            },
            defaultStyle: {
                font: 'Roboto', fontSize: 12
            }
        };
        pdfMake.createPdf(docDefinition).download('bang_chao_blanca.pdf');
    }, 300);
}
</script>
</body>
</html> 